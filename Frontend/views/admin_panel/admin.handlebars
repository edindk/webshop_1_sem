<script>
    function initAddProductModal() {
        var modal = document.getElementById("addProductModal");

        var btn = document.getElementById("addProductBtn");

        var span = document.getElementsByClassName("close")[0];


        btn.addEventListener('click', e => {
            e.preventDefault();
            modal.style.display = "block";


            fetch('http://localhost:5000/productcategory')
                .then(response => response.json())
                .then(json => {
                    let str = '';
                    json.forEach(productCategory => {
                        str += `<option value="${productCategory.productCategoryID}">${productCategory.categoryName}</option>`;
                    })

                    let productCategorySelect = document.getElementById('productCategory');
                    productCategorySelect.innerHTML = str;
                })
        });

        span.onclick = function () {
            modal.style.display = "none";
        }

        window.onclick = function (event) {
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }
    }

    window.addEventListener('DOMContentLoaded', e => {
        initAddProductModal();
    });
</script>
<div class="small-container">
    <h2>Produkter</h2>
    <div style="width: 150px; margin-bottom: 10px;" id="addProductBtn"><a href="" class="addToCartBtn"
            style=" background-color: #28a745; color: white;">Tilføj produkt</a></div>
    <div class="row">
        <table id="productsTable">
            <tr>
                <th>Produkt</th>
                <th>Produktkategori</th>
                <th>Beskrivelse</th>
                <th>Pris</th>
                <th>Antal på lager</th>
                <th>Aktiv</th>
                <th>Oprettet</th>
                <th>Redigeret</th>
            </tr>
            <td>test test test test test </td>
            <td>test test test test test </td>
            <td>test test test test test </td>
            <td>test test test test test </td>
            <td>test</td>
            <td>test</td>
            <td>test</td>
            <td>test</td>
            <td style="border: none;">
                <div style="width: 80px; margin-bottom: 10px;"><a href="" class="addToCartBtn"
                        style=" background-color: orange; color: white;">Rediger</a></div>
                <div style="width: 80px; margin-bottom: 10px;"><a href="" class="addToCartBtn"
                        style=" background-color: orangered; color: white;">Slet</a></div>
            </td>

        </table>

        <div id="addProductModal" class="modal">

            <div class="modal-content">
                <span class="close">&times;</span>
                <div class="row">
                    <form method="POST" action="http://localhost:5000/products" enctype="multipart/form-data">
                        <label for="name">Produkt titel:</label>
                        <input type="text" id="name" name="name"><br>
                        <label for="productCategory">Produktkategori:</label><br>
                        <select name="productCategory" id="productCategory"
                            style="width: 100%; text-align: center; border-radius: 50px;"></select><br>
                        <label for="description">Beskrivelse: </label><br>
                        <textarea id="description" name="description" rows="4" cols="50"
                            style="resize: none; width: 100%; text-align: left;"></textarea>
                        <label for="price">Pris: </label><br>
                        <input type="number" id="price" name="price">
                        <label for="inStock">Antal på lager: </label><br>
                        <input type="number" id="inStock" name="inStock">
                        <label for="imageFile">Produktbillede: </label>
                        <input type="file" id="imageFile" name="imageFile" accept="image/*"
                            style="border: none; border-radius: 0;">
                        <input style="background-color: #28a745; border-style: none; color: white;" type="submit"
                            value="Tilføj produkt">
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<style>
    .modal {
        display: none;
        position: fixed;
        z-index: 1;
        padding-top: 200px;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: rgb(0, 0, 0);
        background-color: rgba(0, 0, 0, 0.4);
    }

    .modal-content {
        background-color: #fefefe;
        margin: auto;
        padding: 20px;
        border: 1px solid #888;
        width: 80%;
    }

    .close {
        color: #aaaaaa;
        float: right;
        font-size: 28px;
        font-weight: bold;
    }

    .close:hover,
    .close:focus {
        color: #000;
        text-decoration: none;
        cursor: pointer;
    }
</style>